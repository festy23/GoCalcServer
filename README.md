### GoCalcServer
### Описание

GoCalcServer - это простое API, который позволяет клиенту отправлять post-запросы, на выходе получая вычисленное арифметическое выражение, записанное в json.

### Содержание API

API состоит из 3 основных папок - cmd, internal, и pkg, а также файла go.mod, в котором указано название модуля,
и testServer.http, который позволяет удобно отправлять http запросы на сервер, меня
в выражении всего лишь одну строку, состоит из одного post метода
- cmd:
  Содержит main.go - файл, который является точкой входа в программу
- internal:
  Скрытая логика програмым - запуск самого приложения в application и реализацию серверной части в backend
- pkg:
  Содержит папку rpn, в которой rpn.go отвечает за реализацию самого калькулятора. Калькулятор способен обрабатывать выражения с
  ```+```
  ```-```
  ```*```
  ```/```
  ```()```

### Запуск

Установка и работа
1. Клонируйте репозиторий: ```git clone https://github.com/festy23/GoCalcServer.git```
2. Перейдите в директорию проекта: ```cd GoCalcServer``` - если вы не находитесь в папке проекта
3. Запустите приложение: ```go run cmd/main.go```
Теперь сервер будет запущен на localhost:8080.
4. Если вы хотите остановить работу приложения (через IDE проблем думаю не возникнет) через консоль, то откройте ее в новом окне.
наберите
```lsoi -i :8080```
Когда увидите таблицу, найдите номер PID, пропишите ```kill <PID>```, куда вместо <PID> вставьте актуальный номер

### Использование

Чтобы использовать API, отправьте HTTP POST запрос на /api/v1/calculate.

Пример запроса:
```
POST /api/v1/calculate
Content-Type: application/json

{
  "expression": "2+2*2"
}
```
### Сценарии запросов
### 1.Успешный запрос
Для успешного выполнения арифметического выражения отправьте POST-запрос с выражением:
```
curl --location 'localhost/api/v1/calculate' \
--header 'Content-Type: application/json' \
--data '{
  "expression": "2+2*2"
}'
```
Ожидаемый ответ:
```
{
  "result": "6.00"
}
```
Статус код: ```200 OK```
### 2. Ошибка 422: Неверное выражение
Если выражение некорректное, например, содержит недопустимые символы, сервер вернет ошибку 422.
(здесь вместо localhost указывайте свой реальный host,
по умолчанию будет localhost:8080)
```
curl --location 'localhost/api/v1/calculate' \
--header 'Content-Type: application/json' \
--data '{
  "expression": "2+2a"
}'
```
Ожидаемый ответ:

{
  "error": "Expression is not valid"
}
Статус код: ```422```

### 3. Ошибка 422: Пустое выражение
Если выражение пустое, сервер также вернет ошибку 422.
```
curl --location 'localhost/api/v1/calculate' \
--header 'Content-Type: application/json' \
--data '{
  "expression": ""
}'
```
Ожидаемый ответ:
```
{
  "error": "Expression is not valid"
}
```
Статус код: ```422```

### 4. Ошибка 500: Внутренняя ошибка сервера
Если сервер сталкивается с внутренней ошибкой, например, проблемой при обработке запроса, он вернет ошибку 500.
```
curl --location 'localhost/api/v1/calculate' \
--header 'Content-Type: application/json' \
--data '{
  "expression": "100/(2-2)"
}'
```
Ожидаемый ответ:
```
{
  "error": "Internal server error"
}
```
Статус код: ```500```

### 5. Ошибка 422: Некорректный формат числа
Если выражение содержит некорректный формат числа, например, лишнюю запятую, сервер вернет ошибку 422.
```
curl --location 'localhost/api/v1/calculate' \
--header 'Content-Type: application/json' \
--data '{
  "expression": "5.2.3+1"
}'
```
Ожидаемый ответ:
```
{
  "error": "Expression is not valid"
}
```
Статус код: ```422```

### Тестирование

1. Тестирование калькулятора. Для запуска тестов пеерйдите в папку GoCalcServer/pkg/rpn, или же с помощью команды (если вы находитесь в папке GoCalcServer)
```
cd pkg/rpn
go test
```
2. Тестирование сервера. Для запуска тестов перейдите в папку GoCalcServer/internal/backend и запустите backend_test.go или же с помощью команды (если вы находитесь в папке GoCalcServer
```
cd internal/backend
go test
```
------------------------------------------------------------------------------------
### UPD: если у вас есть какие-то вопросы по api или пожелания пишите мне
Выполнил tg: [@knvlvivn](https://t.me/knvlvivn)
